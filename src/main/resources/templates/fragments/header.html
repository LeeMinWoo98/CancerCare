<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>

<header th:fragment="headerFragment">
    <div class="container nav">
        <a th:href="@{/}" class="logo" aria-label="cancercare 홈으로">
            <span>cancercare</span>
        </a>

        <nav class="menu" aria-label="주요 메뉴">
            <a th:href="@{/food/recommend}">식단 추천</a>
            <a th:href="@{/chat/chatbot}">챗봇 상담</a>
            <a th:href="@{/diagnosis}">암 진단</a>
            <a th:href="@{/hospital/find}">병원 찾기</a>

            <!-- 로그인 상태일 때 -->
            <div sec:authorize="isAuthenticated()" style="display: flex; align-items: center; gap: 12px;">
                <span sec:authentication="name" class="user-name"></span>
                <a th:href="@{/mypage}" class="login mypage-icon" title="마이페이지">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.5906 22C20.5906 18.13 16.7406 15 12.0006 15C7.26064 15 3.41064 18.13 3.41064 22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
                <form th:action="@{/logout}" method="post" style="display:inline;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="login">로그아웃</button>
                </form>
            </div>

            <!-- 비로그인 상태일 때 -->
            <a sec:authorize="isAnonymous()" class="login" th:href="@{/login}">로그인</a>
        </nav>
    </div>
</header>

</body>
</html>
